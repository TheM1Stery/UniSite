@page "{id:guid}"
@model WebApplication2.Pages.PostModel
@{
    ViewData["Title"] = "Post";
    var figure = Model.Figure;
}

@if (figure is null)
{
    <div>Этого поста не существует</div>
    return;
}


<!--Title-->
<div class="text-center pt-16 md:pt-32">
    <h1 class="font-bold break-normal text-3xl md:text-5xl">@figure.Name - @figure.Surname</h1>
</div>

<!--image-->
<div class="container w-full max-w-6xl mx-auto bg-white bg-cover mt-8 rounded h-[75vh] bg-center md:bg-left-top lg:bg-left-top" 
     style="background-image:url('@figure.FullImageUrl');"></div>

<!--Container-->
<div class="container max-w-5xl mx-auto -mt-32">
    <div class="mx-0 sm:mx-6">
        <div class="bg-white w-full p-8 md:p-24 text-xl md:text-2xl text-gray-800 leading-normal mb-3" style="font-family:Georgia,serif;">
            @figure.FullDescription
        </div>
    </div>
</div>

@section Scripts{
    <script>
    	/* Progress bar */
    	//Source: https://alligator.io/js/progress-bar-javascript-css-variables/
    	let h = document.documentElement,
    		  b = document.body,
    		  st = 'scrollTop',
    		  sh = 'scrollHeight',
    		  progress = document.querySelector('#progress'),
    		  scroll;
    	let scrollpos = window.scrollY;
    	const header = document.getElementById("header");
    
    	document.addEventListener('scroll', function() {
    
    		/*Refresh scroll % width*/
    		scroll = (h[st]||b[st]) / ((h[sh]||b[sh]) - h.clientHeight) * 100;
    		progress.style.setProperty('--scroll', scroll + '%');
    
    		/*Apply classes for slide in bar*/
    		scrollpos = window.scrollY;
    
        if(scrollpos > 100){
          header.classList.remove("hidden");
    	  header.classList.remove("fadeOutUp");
    	  header.classList.add("slideInDown");
        }
        else {
    	  header.classList.remove("slideInDown");
          header.classList.add("fadeOutUp");
    	  header.classList.add("hidden");
        }
    
    	});
    
    </script>
}